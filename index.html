<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>月丸マップ</title>

<link rel="stylesheet" href="jmap.css">

<style>
body {
  margin: 0;
  background: #f5f5f5;
  font-family: -apple-system, BlinkMacSystemFont,
    "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
}

header {
  text-align: center;
  padding: 10px 0;
  font-size: 1.5rem;
  font-weight: bold;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
}

#my-map {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
}
</style>
</head>

<body>

<header>月丸マップ</header>

<div id="my-map"></div>

<script src="jmap.js"></script>
<script>
/* ======================
   地図生成
====================== */
const map = new jpmap.japanMap(
  document.getElementById("my-map"),
  {
    width: Math.min(window.innerWidth, 900),
    showsPrefectureName: true,
    movesIslands: true,
    lang: "ja",
    onSelect: function(data){
      alert(data.name);
    }
  }
);

/* ======================
   SVGが生成されたか監視
====================== */
const colorTimer = setInterval(() => {
  const paths = document.querySelectorAll("#my-map svg path");

  if (paths.length > 0) {
    clearInterval(colorTimer);
    applyColors(paths);
  }
}, 50);

/* ======================
   色付け（安全）
====================== */
function applyColors(paths) {
  const regionColors = {
    "北海道":"#9b8ce3",

    2:"#6fa8dc",3:"#6fa8dc",4:"#6fa8dc",
    5:"#6fa8dc",6:"#6fa8dc",7:"#6fa8dc",

    8:"#76c8e8",9:"#76c8e8",10:"#76c8e8",
    11:"#76c8e8",12:"#76c8e8",13:"#76c8e8",14:"#76c8e8",

    15:"#7fd39a",16:"#7fd39a",17:"#7fd39a",
    18:"#7fd39a",19:"#7fd39a",20:"#7fd39a",
    21:"#7fd39a",22:"#7fd39a",23:"#7fd39a",

    24:"#f5d76e",25:"#f5d76e",26:"#f5d76e",
    27:"#f5d76e",28:"#f5d76e",29:"#f5d76e",30:"#f5d76e",

    31:"#f2a65a",32:"#f2a65a",33:"#f2a65a",
    34:"#f2a65a",35:"#f2a65a",

    36:"#eb6b6b",37:"#eb6b6b",38:"#eb6b6b",39:"#eb6b6b",

    40:"#f4a7c5",41:"#f4a7c5",42:"#f4a7c5",
    43:"#f4a7c5",44:"#f4a7c5",45:"#f4a7c5",
    46:"#f4a7c5",47:"#f4a7c5"
  };

  paths.forEach(path => {
    const code = path.getAttribute("data-code");
    if (regionColors[code]) {
      path.style.fill = regionColors[code];
    }
  });
}
</script>

</body>
</html>
