<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>月丸マップ</title>

<link rel="stylesheet" href="jmap.css">

<style>
body {
  margin: 0;
  background: #f5f5f5;
  font-family: -apple-system, BlinkMacSystemFont,
    "Hiragino Kaku Gothic ProN", "Noto Sans JP", sans-serif;
}

header {
  text-align: center;
  padding: 10px 0;
  font-size: 1.5rem;
  font-weight: bold;
  background: #ffffff;
  border-bottom: 1px solid #ddd;
}

#my-map {
  width: 100%;
  max-width: 900px;
  margin: 0 auto;
}
</style>
</head>

<body>

<header>月丸マップ</header>

<div id="my-map"></div>

<script src="jmap.js"></script>
<script>
/* ======================
   地図生成
====================== */
const map = new jpmap.japanMap(
  document.getElementById("my-map"),
  {
    width: Math.min(window.innerWidth, 900),
    showsPrefectureName: true,
    movesIslands: true,
    lang: "ja",
    onSelect: function(data){
      alert(data.name);
    }
  }
);

/* ======================
   SVGが生成されたか監視
====================== */
const colorTimer = setInterval(() => {
  const paths = document.querySelectorAll("#my-map svg path");

  if (paths.length > 0) {
    clearInterval(colorTimer);
    applyColors(paths);
  }
}, 50);

/* ======================
   色付け（安全）
====================== */
const areas = [
  {code:1, name:"北海道", color:"#7f7eda", hoverColor:"#b3b2ee"},
  {code:2, name:"青森", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:3, name:"岩手", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:4, name:"宮城", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:5, name:"秋田", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:6, name:"山形", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:7, name:"福島", color:"#759ef4", hoverColor:"#98b9ff"},
  {code:8, name:"茨城", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:9, name:"栃木", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:10,name:"群馬", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:11,name:"埼玉", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:12,name:"千葉", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:13,name:"東京", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:14,name:"神奈川", color:"#7ecfea", hoverColor:"#b7e5f4"},
  {code:47,name:"沖縄", color:"#eb98ff", hoverColor:"#f5c9ff"}
];

  paths.forEach(path => {
    const code = path.getAttribute("data-code");
    if (regionColors[code]) {
      path.style.fill = regionColors[code];
    }
  });
}
</script>

</body>
</html>
